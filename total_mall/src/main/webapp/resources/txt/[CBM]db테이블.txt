//공지사항 데이터베이스
create table tb_notice(
n_idx int unsigned auto_increment,
m_idx int unsigned not null, -- 회원 번호
writer varchar(30) not null, -- 작성자
title varchar(50) not null, -- 제목
content varchar(1000) not null, -- 내용
originfile_name varchar(50), -- 원본 파일명
savefile_name varchar(50), -- 저장 파일명
read_cnt int unsigned default 0, -- 조회수
post_date datetime default now(), -- 등록일
update_date datetime default now(), -- 수정일
del_or_not decimal(1) default 1, -- 게시글 유지 여부
service varchar(30) not null, -- 서비스
constraint tb_notice_pk primary key (n_idx), -- 기본키
constraint tb_notice_fk foreign key (m_idx)
    references tb_member (m_idx) -- 외래키
);

//문의하기 데이터베이스
create table tb_voc(
v_idx int unsigned auto_increment,
m_idx int unsigned not null, -- 회원 번호
writer varchar(30) not null, -- 작성자
voc_type varchar(50) not null, -- 유형
title varchar(50) not null, -- 제목
content varchar(1000) not null, -- 내용
originfile_name varchar(50), -- 원본 파일명
savefile_name varchar(50), -- 저장 파일명
post_date datetime default now(), -- 등록일
update_date datetime default now(), -- 수정일
del_or_not decimal(1) default 1, -- 게시글 유지 여부
constraint tb_voc_pk primary key (v_idx), -- 기본키
constraint tb_voc_fk foreign key (m_idx)
references tb_member (m_idx) -- 외래키
);

//리뷰 데이터베이스
CREATE TABLE tb_review(
    r_idx INT UNSIGNED AUTO_INCREMENT,
    m_idx INT UNSIGNED NOT NULL,
    p_idx INT UNSIGNED NOT NULL,
    member_id varchar(30) not null,
    member_name varchar(20) not null,
    content VARCHAR(1000) NOT NULL,
    star INT,
    originfile_name VARCHAR(50),
    savefile_name VARCHAR(50),
    post_date DATETIME DEFAULT CURRENT_TIMESTAMP,
    update_date DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    del_or_not DECIMAL(1) DEFAULT 1,
    PRIMARY KEY (r_idx),
    FOREIGN KEY (m_idx) REFERENCES tb_member(m_idx),
    FOREIGN KEY (p_idx) REFERENCES tb_product(p_idx)
);

insert into tb_product(p_idx, category)
values (1, 'meat'), (2, 'vegetables'), (3, 'fruits'), (4, 'frozen'), (5, 'kitchen'), (6, 'curtain'), 
(7, 'games'), (8, 'lego'), (9, 'petsupplies'), (10, 'dailynecessities'), (11, 'bodyhair'), (12, 'men'), 
(13, 'women'), (14, 'education'), (15, 'novels'), (16, 'overseas'), (17, 'living'), (18, 'bedding'), 
(19, 'homeAppliances'), (20, 'digital'), (21, 'soccer'), (22, 'golf');
insert into tb_product(category, product_name, product_code, brand, summary, detail, save_file_name1, price)
values ('meat', '삼겁살', 'ASD123412341234', 'a마켓', '저렴한 가격의 상품', '전국에서 가장 저렴함 상품. 오랜기간 숙성된 고기.', '사과.jpg', 1500);
insert into tb_product(category, product_name, product_code, brand, summary, detail, save_file_name1, price)
values ('meat', '삼겁살', 'DGBSF412341234', 'B마켓', '신선한 제품', '전국에서 가장 저렴함 상품. 오랜기간 숙성된 고기.', '사과.jpg', 1500);
insert into tb_product(category, product_name, product_code, brand, summary, detail, save_file_name1, price)
values ('meat', '삼겁살', 'DNFS23412341234', 'C마켓', '오늘의 신상품', '전국에서 가장 저렴함 상품. 오랜기간 숙성된 고기.', '사과.jpg', 1500);
create table orders(
	o_idx int unsigned auto_increment,
    pay varchar(255),
    totalprice int(11),
    requests varchar(255),
    created_date timestamp,
    modified_date timestamp,
    constraint orders_pk primary key(o_idx)
);


drop table tb_product//;

select * from tb_product;



show tables;

select * from tb_product where category = 'meat';
SELECT * FROM tb_product WHERE category LIKE '%meat%'
ORDER BY p_idx DESC
LIMIT 20 OFFSET 1;

select * from tb_product where category = 'meat';

SELECT * FROM tb_product WHERE category LIKE 'curtain'
ORDER BY p_idx DESC
LIMIT 20 OFFSET 0;

				select * from tb_product
                where summary like CONCAT('%','','%')
						 		order by p_idx desc
				                limit 0, 10;
				select * from tb_product
				where summary like CONCAT('%', '','%')
				order by p_idx desc
				limit 0, 5

